@use "sass:color";
@use "styles/vars" as v;
@use "styles/panel" as panel;

$mobile-fixed-width: 35px;

// GENERAL TRANPOSED GRID STYLING
.transposedGrid {
  width: 100%;
  margin: 0 auto;
  background: linear-gradient(
    180deg,
    color.adjust(v.$background-medium, $lightness: 2%),
    v.$background-dark
  );
  border: 1px solid v.$border-secondary;
  border-radius: v.$border-radius-md;
  border-spacing: 0px;
  font-family: v.$font-family-primary;
  font-size: 14px;
  text-align: center;
  margin-bottom: 25px;
  box-shadow: v.$box-shadow-default;

  th,
  td {
    padding: 6px;
    border: 1px solid rgba(v.$border-secondary, 0.7);
    min-width: 40px;
    max-width: 60px;
    height: 40px;
  }

  // Center cell contents
  .cellContent {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
  }

  // Day header cells (first column)
  th.dayHeader {
    position: sticky;
    left: -3;
    background-color: v.$background-dark; // Ensures a solid background when scrolling
    z-index: 2; // Higher than other cells so it stays on top
    min-height: 40px;
    max-height: 60px;
    min-width: 60px;
    max-width: 80px;
    padding: 0 6px;
    @include panel.first-col-separator(2px);
    .cellContent {
      font-size: 11px;
      font-weight: 100;
      flex-direction: column;
      gap: 4px;
      justify-content: center;
      align-items: center;
    }
  }

  // Totals row styling
  tr.totalsRow {
    background-color: color.adjust(v.$background-dark, $lightness: -4%);
    font-weight: bold;
  }
}

// Remove any alternating row background so our cell colors show as intended.
.transposedGrid > tbody > tr {
  background-color: transparent !important;
}

// CLASS TO DIM A ROW WHEN A DAY IS TOGGLED OFF
.disabledRow {
  opacity: 0.35;
}

/* Sample color coding classes */
.red {
  background-color: rgba(v.$schedule-red, 0.35);
  color: v.$color-white;
}
.orange {
  background-color: rgba(v.$schedule-yellow, 0.35);
  color: v.$color-white;
}
.yellow {
  background-color: rgba(v.$schedule-yellow, 0.25);
  color: v.$color-white;
}
.green {
  background-color: rgba(v.$schedule-green, 0.35);
  color: v.$color-white;
}

.redBorder {
  @extend .red;
}
.orangeBorder {
  @extend .orange;
}
.yellowBorder {
  @extend .yellow;
}
.greenBorder {
  @extend .green;
}

.greenBorder {
  background-color: rgba(v.$schedule-green, 0.15) !important;
  color: v.$color-white;
}
.orangeBorder {
  background-color: rgba(v.$schedule-yellow, 0.2) !important;
}
.yellowBorder {
  background-color: rgba(v.$schedule-yellow, 0.2) !important;
}
.redBorder {
  background-color: rgba(v.$schedule-red, 0.15) !important;
}

.totalGamesPerDayRow > .title::before {
  content: "GP/Day";
}

.teamRow {
  .teamName {
    display: none;
  }
}

/* Rank Colors â€“ used in the Score row */
@for $rank from 1 through 32 {
  .rank-color-#{$rank} {
    background-color: v.get-rank-color($rank, 32, v.$fill-opacity-subtle);
  }
}

/* Sort button & toggle styling */
.sortButton {
  background: none;
  border: none;
  cursor: pointer;
  font-family: v.$font-family-primary;
  font-size: 14px;
  color: v.$text-primary;
  display: flex;
  align-items: center;
}

.toggle {
  margin-left: 4px;
}

/* Highlight classes for top (green) and bottom (red) teams (if applied separately) */
.teamColumnGreen {
  background-color: rgba(v.$schedule-green, 0.08) !important;
}
.teamColumnRed {
  background-color: rgba(v.$schedule-red, 0.08) !important;
}

/* New helper class to force entire column hover effect */
.columnHovered {
  filter: brightness(1.3);
}

/* Standard alternating columns */
.altColumn {
  background-color: v.$background-dark;
  transition: background-color v.$transition-duration v.$transition-easing;
}
.altColumnHover {
  background-color: v.$background-light;
  transition: background-color v.$transition-duration v.$transition-easing;
}

/* Top team alternating backgrounds (blend base with green tint) */
.altColumnGreenEven {
  background-color: color.mix(
    v.$background-dark,
    rgba(v.$schedule-green, 0.35),
    55%
  ) !important;
  transition: background-color v.$transition-duration v.$transition-easing;
}
.altColumnGreenOdd {
  background-color: color.mix(
    v.$background-light,
    rgba(v.$schedule-green, 0.4),
    55%
  ) !important;
  transition: background-color v.$transition-duration v.$transition-easing;
}

/* Bottom team alternating backgrounds (blend base with red tint) */
.altColumnRedEven {
  background-color: color.mix(
    v.$background-dark,
    rgba(v.$schedule-red, 0.35),
    55%
  ) !important;
  transition: background-color v.$transition-duration v.$transition-easing;
}
.altColumnRedOdd {
  background-color: color.mix(
    v.$background-light,
    rgba(v.$schedule-red, 0.4),
    55%
  ) !important;
  transition: background-color v.$transition-duration v.$transition-easing;
}

/* Responsive adjustments */
@media (max-width: v.$breakpoint-mobile-max) {
  .transposedGrid {
    th,
    td {
      font-size: 12px;
      padding: 4px;
    }
    th.dayHeader {
      font-size: 12px;
    }
  }
}

.gridWrapper {
  width: 100%;
  margin: 0 auto;
}

@media (max-width: 480px) {
  .transposedGrid {
    display: block; // Ensures block-level container behavior
    overflow-x: auto; // Enables horizontal scrolling
    -webkit-overflow-scrolling: touch; // Smooth scrolling on iOS
  }
}
