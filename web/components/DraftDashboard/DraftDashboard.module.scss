// components/DraftDashboard/DraftDashboard.module.scss
@use "sass:color";
@use "styles/vars" as v;

/* =================== Main Dashboard Container =================== */
.dashboardContainer {
  @include v.component-wrapper;
  width: 100%;
  min-height: 100vh;
  background-color: v.$background-dark;
  display: flex;
  flex-direction: column;
  padding: v.$space-md;
  gap: v.$space-lg;
  box-sizing: border-box;
}

/* =================== Settings Section (Full Width) =================== */
.settingsSection {
  width: 100%;
  background-color: v.$background-medium;
  border-radius: v.$border-radius-md;
  padding: v.$space-md v.$space-lg;
  border: 1px solid v.$border-secondary;
  box-shadow: v.$box-shadow-default;
}

/* =================== Suggested Picks Row =================== */
.suggestedSection {
  width: 100%;
}

/* =================== Three Panel Layout =================== */
.mainContent {
  display: grid;
  grid-template-columns: 2fr 1fr 2fr; /* 40% 20% 40% */
  gap: v.$space-lg;
  flex: 1;
  min-height: 0; /* Allow grid items to shrink */
  height: calc(100vh - 200px); /* Account for settings section and padding */
}

/* =================== Panel Styling =================== */
.leftPanel,
.centerPanel,
.rightPanel {
  background-color: v.$background-medium;
  border-radius: v.$border-radius-md;
  border: 1px solid v.$border-secondary;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-shadow: v.$box-shadow-default;
}

.leftPanel {
  /* Draft Board + Leaderboard */
  min-width: 0; /* Prevent overflow */
}

.centerPanel {
  /* My Roster */
  min-width: 250px; /* Ensure minimum usable width */
  background: linear-gradient(
    135deg,
    color.adjust(v.$background-medium, $lightness: 2%) 0%,
    v.$background-medium 50%,
    color.adjust(v.$background-medium, $lightness: -2%) 100%
  );
  border: 2px solid v.$primary-color;
  box-shadow:
    v.$box-shadow-default,
    0 0 20px rgba(v.$primary-color, 0.15);
}

.rightPanel {
  /* Projections Table */
  min-width: 0; /* Prevent overflow */
}

/* =================== Responsive Design =================== */
@media (max-width: v.$breakpoint-desktop) {
  .mainContent {
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto;
    height: auto;
    gap: v.$space-md;
  }

  .leftPanel,
  .centerPanel,
  .rightPanel {
    min-height: 400px;
  }

  .centerPanel {
    min-width: auto;
    order: -1; /* Move My Roster to top on mobile */
  }

  .dashboardContainer {
    padding: v.$space-sm;
    gap: v.$space-md;
  }
}

@media (max-width: v.$breakpoint-tablet) {
  .settingsSection {
    padding: v.$space-sm;
  }

  .mainContent {
    gap: v.$space-sm;
  }

  .leftPanel,
  .centerPanel,
  .rightPanel {
    min-height: 300px;
  }
}

/* =================== Panel Content Styling =================== */
.panelHeader {
  background-color: color.adjust(v.$background-dark, $lightness: -3%);
  border-bottom: 2px solid v.$border-secondary;
  padding: v.$space-md v.$space-lg;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-shrink: 0;
}

.panelTitle {
  font-family: v.$font-family-accent, sans-serif;
  font-size: v.$font-size-lg;
  font-weight: 700;
  color: v.$color-white;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  margin: 0;
}

.panelTitleAccent {
  color: v.$primary-color;
}

.panelContent {
  flex: 1;
  overflow: auto;
  padding: v.$space-md;
  @include v.custom-scrollbar(v.$primary-color, v.$background-medium);
}

/* =================== Common Button Styles =================== */
.draftButton {
  @include v.button-style;
  background: linear-gradient(
    135deg,
    v.$primary-color 0%,
    v.$secondary-color 100%
  );
  color: v.$color-white;
  border: none;
  padding: v.$space-sm v.$space-lg;
  font-family: v.$font-family-accent, sans-serif;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  border-radius: v.$border-radius-md;
  transition: all 0.3s ease;

  &:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 16px rgba(v.$primary-color, 0.3);
  }

  &:disabled {
    background: v.$color-grey-medium;
    cursor: not-allowed;
    opacity: 0.6;
    transform: none;
    box-shadow: none;
  }
}

.secondaryButton {
  @include v.button-style;
  background-color: transparent;
  color: v.$text-primary;
  border: 1px solid v.$border-secondary;
  padding: v.$space-xs v.$space-md;
  font-size: v.$font-size-sm;

  &:hover:not(:disabled) {
    background-color: color.adjust(v.$primary-color, $alpha: -0.8);
    border-color: v.$primary-color;
    color: v.$primary-color;
  }
}

/* =================== Status Indicators =================== */
.currentTurnIndicator {
  display: inline-flex;
  align-items: center;
  gap: v.$space-xs;
  padding: v.$space-xs v.$space-sm;
  background: linear-gradient(
    135deg,
    v.$success-color 0%,
    color.adjust(v.$success-color, $lightness: 10%) 100%
  );
  color: v.$color-white;
  border-radius: v.$border-radius-sm;
  font-size: v.$font-size-sm;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;

  &::before {
    content: "‚óè";
    animation: pulse 2s infinite;
  }
}

.waitingIndicator {
  @extend .currentTurnIndicator;
  background: linear-gradient(
    135deg,
    v.$color-grey-medium 0%,
    color.adjust(v.$color-grey-medium, $lightness: 10%) 100%
  );

  &::before {
    animation: none;
  }
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* =================== Loading and Error States =================== */
.loadingState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: v.$space-xl;
  color: v.$text-secondary;
  font-style: italic;
}

.errorState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: v.$space-xl;
  background-color: rgba(v.$danger-color, 0.1);
  border: 1px solid rgba(v.$danger-color, 0.3);
  border-radius: v.$border-radius-md;
  color: v.$danger-color;
  text-align: center;
}

/* =================== Draft Progress =================== */
.draftProgress {
  display: flex;
  align-items: center;
  gap: v.$space-sm;
  margin-bottom: v.$space-md;
}

.progressBar {
  flex: 1;
  height: 8px;
  background-color: v.$background-dark;
  border-radius: 4px;
  overflow: hidden;
  border: 1px solid v.$border-secondary;
}

.progressFill {
  height: 100%;
  background: linear-gradient(
    90deg,
    v.$primary-color 0%,
    v.$secondary-color 100%
  );
  transition: width 0.5s ease;
}

.progressText {
  font-size: v.$font-size-sm;
  color: v.$text-secondary;
  white-space: nowrap;
}
