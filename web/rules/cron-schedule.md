# CRON SCHEDULE

```sql
----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  07:20 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  02:20 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-yahoo-matchup-dates',
--     '20 7 * * *', -- 08:55 UTC
--     $$
--         SELECT net.http_get(
--             url := 'https://fhfhockey.com/api/v1/db/update-yahoo-weeks?game_key=nhl',
--             headers := '{"Authorization": "Bearer fhfh-cron-mima-233", "Content-Type": "application/json"}'::jsonb,
--             timeout_milliseconds := 240000 -- 4 mins
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  07:25 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  02:25 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||   16 URLs   |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- WORKING 1/6/26
-- SELECT cron.schedule(
--     'update-nst-gamelog',
--     '25 7 * * *', -- 07:25 UTC

--     $$
--         SELECT net.http_get(url:= 'https://fhfhockey.com/api/v1/db/update-nst-gamelog', 
--         headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 240000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  07:30 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  02:30 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-all-wgo-skaters',
--     '30 7 * * *', -- 07:30 UTC
--     $$
--         SELECT net.http_get(url:= 'https://fhfhockey.com/api/v1/db/update-wgo-skaters?action=all', 
--         headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  07:35 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  02:35 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-all-wgo-goalies',
--     '35 7 * * *', -- 07:35 UTC
--     $$
--         SELECT net.http_get(url:= 'https://fhfhockey.com/api/v1/db/update-wgo-goalies?action=all', 
--         headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  07:40 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  02:40 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-all-wgo-skater-totals',
--     '40 7 * * *', -- 07:40 UTC
--     $$
--         SELECT net.http_get(url:= 'https://fhfhockey.com/api/v1/db/update-wgo-totals?season=current', 
--         headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  07:45 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  02:45 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- STATUS: 404 NOT FOUND

-- SELECT cron.schedule(
--     'update-shift-charts',
--     '45 7 * * *', -- 07:45 UTC
--     $$
--         SELECT net.http_get(url:= 'https://fhfhockey.com/api/v1/db/update-shifts?action=all',
--         headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  07:45 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  02:45 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-rolling-player-averages',
--     '45 7 * * *', -- 07:45 UTC
--     $$
--         SELECT net.http_get(url:= 'https://fhfhockey.com/api/v1/db/update-rolling-player-averages',
--         headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  07:50 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  02:50 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'daily-refresh-player-unified-matview',
--     '50 7 * * *', -- 07:50 UTC
--     'REFRESH MATERIALIZED VIEW player_stats_unified;'
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  07:55 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  02:55 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-power-play-timeframes',
--     '55 7 * * *', -- 07:55 UTC
--     $$
--         SELECT net.http_get(url:= 'https://fhfhockey.com/api/v1/db/powerPlayTimeFrame?gameId=all', 
--         headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  08:00 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  03:00 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-line-combinations-all',
--     '00 8 * * *', -- 08:00 UTC
--     $$
--         SELECT net.http_get(url:= 'https://fhfhockey.com/api/v1/db/update-line-combinations', 
--         headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  08:05 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  03:05 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||    1 URL    |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-team-yearly-summary',
--     '05 08 * * *', -- 10:00 UTC
--     $$
--         SELECT net.http_get(
--             url := 'https://fhfhockey.com/api/v1/db/update-team-yearly-summary',
--             headers := '{"Authorization": "Bearer fhfh-cron-mima-233", "Content-Type": "application/json"}'::jsonb,
--             timeout_milliseconds := 240000 -- 4 mins
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  08:10 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  03:10 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||    4 URLs   |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-nst-tables-all',
--     '10 8 * * *', -- 08:10 UTC
--     $$
--         SELECT net.http_get(url:= 'https://fhfhockey.com/api/Teams/nst-team-stats?date=all', 
--         headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  08:15 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  03:15 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-standings-details',
--     '15 8 * * *', -- 08:15 UTC
--     $$
--         SELECT net.http_get(url:= 'https://fhfhockey.com/api/v1/db/update-standings-details?date=all', 
--         headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  08:20 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  03:20 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-all-wgo-goalie-totals',
--     '20 8 * * *', -- 08:20 UTC
--     $$
--         SELECT net.http_get(url:= 'https://fhfhockey.com/api/v1/db/update-wgo-goalie-totals', 
--         headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  08:25 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  03:25 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-expected-goals',
--     '25 8 * * *', -- 08:25 UTC
--     $$
--         SELECT net.http_get(url:= 'https://fhfhockey.com/api/v1/db/update-expected-goals?date=all', 
--         headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  08:30 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  03:30 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||   10 URLs   |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-nst-goalies',
--     '30 8 * * *', -- 08:30 UTC
--     $$
--         SELECT net.http_get(url:= 'https://fhfhockey.com/api/v1/db/update-nst-goalies', 
--         headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  08:35 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  03:35 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- -- WORKING
-- SELECT cron.schedule(
--     'update-pbp',
--     '51 20 * * *', -- 08:35 UTC
--     $$
--         SELECT net.http_get(url:= 'https://fhfhockey.com/api/v1/db/update-PbP?gameId=recent',
--         headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  08:40 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  03:40 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-yahoo-players',
--     '40 08 * * *', -- 08:40 UTC
--     $$
--         SELECT net.http_get(
--         url := 'https://fhfhockey.com/api/v1/db/update-yahoo-players?gameId=465',
--         headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  08:45 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  03:45 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||    4 URLs   |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-nst-current-season',
--     '45 8 * * *', -- 08:45 UTC
--     $$
--         SELECT net.http_get(
--             url := 'https://fhfhockey.com/api/v1/db/update-nst-current-season',
--             headers := '{"Authorization": "Bearer fhfh-cron-mima-233", "Content-Type": "application/json"}'::jsonb,
--             timeout_milliseconds := 240000 -- 4 mins
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  08:50 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  03:50 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-wigo-table-stats',
--     '50 8 * * *', -- 08:50 UTC
--     $$
--         SELECT net.http_get(
--             url := 'https://fhfhockey.com/api/v1/db/calculate-wigo-stats',
--             headers := '{"Authorization": "Bearer fhfh-cron-mima-233", "Content-Type": "application/json"}'::jsonb,
--             timeout_milliseconds := 240000 -- 4 mins
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  08:55 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  03:55 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'sync-yahoo-players-to-sheet',
--     '55 08 * * *', -- 08:55 UTC
--     $$  
--         SELECT net.http_get(
--         url := 'https://fhfhockey.com/api/internal/sync-yahoo-players-to-sheet?gameId=465',
--         headers := '{"Authorization":"Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 300000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  09:00 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  04:00 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-rolling-player-averages',
--     '00 9 * * *', -- 09:00 UTC
--     $$
--         SELECT net.http_post(
--             url := 'https://fhfhockey.com/api/v1/db/update-rolling-player-averages',
--             body := '{}'::jsonb,
--             headers := '{"Authorization": "Bearer fhfh-cron-mima-233", "Content-Type": "application/json"}'::jsonb,
--             timeout_milliseconds := 300000 -- 5 mins
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  09:05 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  04:05 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'daily-refresh-goalie-unified-matview',
--     '05 9 * * *', -- 09:05 UTC
--     'REFRESH MATERIALIZED VIEW goalie_stats_unified;'
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  09:10 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  04:10 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-team-ctpi-daily',
--     '10 9 * * *', -- 09:10 UTC
--     $$
--         SELECT net.http_get(
--             url := 'https://fhfhockey.com/api/v1/db/update-team-ctpi-daily',
--             headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--             timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  09:15 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  04:15 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-team-power-ratings',
--     '15 9 * * *', -- 09:15 UTC
--     $$
--         SELECT net.http_get(
--             url := 'https://fhfhockey.com/api/v1/db/update-team-power-ratings',
--             headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--             timeout_milliseconds := 300000 -- 5 mins
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  09:20 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  04:20 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-team-power-ratings-new',
--     '20 9 * * *', -- 09:20 UTC
--     $$
--         SELECT net.http_get(
--             url := 'https://fhfhockey.com/api/v1/db/update-team-power-ratings-new',
--             headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--             timeout_milliseconds := 300000 -- 5 mins
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  09:30 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  04:30 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-goalie-projections-v2',
--     '30 9 * * *', -- 09:30 UTC
--     $$
--         SELECT net.http_post(
--             url := 'https://fhfhockey.com/api/v1/db/update-goalie-projections-v2',
--             body := '{}'::jsonb,
--             headers := '{"Authorization": "Bearer fhfh-cron-mima-233", "Content-Type": "application/json"}'::jsonb,
--             timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  09:35 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  04:35 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-wgo-teams',
--     '35 9 * * *', -- 09:35 UTC
--     $$
--         SELECT net.http_get(url:= 'https://fhfhockey.com/api/v1/db/run-fetch-wgo-data', 
--         headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--         timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  09:40 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  04:40 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-start-chart-projections',
--     '40 9 * * *', -- 09:40 UTC
--     $$
--         SELECT net.http_post(
--             url := 'https://fhfhockey.com/api/v1/db/update-start-chart-projections',
--             body := '{}'::jsonb,
--             headers := '{"Authorization": "Bearer fhfh-cron-mima-233", "Content-Type": "application/json"}'::jsonb,
--             timeout_milliseconds := 300000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  09:50 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  04:50 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- 09:50 UTC  (after rolling averages + goalie starts)
-- SELECT cron.schedule(
--     'build-forge-derived-v2',
--     '50 09 * * *',
--     $$
--         SELECT net.http_post(
--             url := 'https://fhfhockey.com/api/v1/db/build-projection-derived-v2',
--             body := '{}'::jsonb,
--             headers := '{"Authorization": "Bearer fhfh-cron-mima-233", "Content-Type": "application/json"}'::jsonb,
--             timeout_milliseconds := 300000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  10:05 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  05:05 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- -- 10:05 UTC  (after derived tables are built)
-- SELECT cron.schedule(
--     'run-forge-projection-v2',
--     '05 10 * * *',
--     $$
--         SELECT net.http_post(
--             url := 'https://fhfhockey.com/api/v1/db/run-projection-v2',
--             body := '{}'::jsonb,
--             headers := '{"Authorization": "Bearer fhfh-cron-mima-233", "Content-Type": "application/json"}'::jsonb,
--             timeout_milliseconds := 300000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  09:55 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  04:55 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||    8 URLs   |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-nst-team-daily',
--     '55 9 * * *', -- 09:55 UTC
--     $$
--         SELECT net.http_get(
--             url := 'https://fhfhockey.com/api/v1/db/update-nst-team-daily',
--             headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--             timeout_milliseconds := 100000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  10:00 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  05:00 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'daily-refresh-matview',
--     '0 10 * * *', -- 10:00 UTC
--     'REFRESH MATERIALIZED VIEW yahoo_nhl_player_map_mat;'
-- );



----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  10:15 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  05:15 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--   'refresh-team-power-ratings-daily',
--   '15 10 * * *', -- 10:15 UTC
--   $$
--     WITH s AS (
--       SELECT *
--       FROM public.seasons
--       ORDER BY id DESC
--       LIMIT 1
--     )
--     SELECT public.refresh_team_power_ratings(
--       (SELECT startDate FROM s),
--       LEAST(
--         (now() AT TIME ZONE 'America/New_York')::date,
--         (SELECT regularSeasonEndDate FROM s)
--       )
--     );
--   $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  13:00 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  08:00 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--    'daily-cron-report',
--    '00 13 * * *',  -- 13:00 UTC
--    $$
--      SELECT net.http_get(
--        url       := 'https://fhfhockey.com/api/v1/db/cron-report',
--        headers   := '{"Authorization":"Bearer fhfh-cron-mima-233"}'::jsonb,
--        timeout_milliseconds := 240000
--      );
--    $$
--  );
```

Timeline (earliest -> latest)

- 07:20 UTC: update-yahoo-matchup-dates
- 07:25 UTC: update-nst-gamelog
- 07:30 UTC: update-all-wgo-skaters
- 07:35 UTC: update-all-wgo-goalies
- 07:40 UTC: update-all-wgo-skater-totals
- 07:45 UTC: update-shift-charts (broken) + update-rolling-player-averages (GET)
- 07:50 UTC: refresh player_stats_unified matview
- 07:55 UTC: update-power-play-timeframes
- 08:00 UTC: update-line-combinations-all
- 08:05 UTC: update-team-yearly-summary
- 08:10 UTC: update-nst-tables-all
- 08:15 UTC: update-standings-details
- 08:20 UTC: update-all-wgo-goalie-totals
- 08:25 UTC: update-expected-goals
- 08:30 UTC: update-nst-goalies
- 08:35 UTC: update-pbp (broken)
- 08:40 UTC: update-yahoo-players
- 08:45 UTC: update-nst-current-season
- 08:50 UTC: update-wigo-table-stats
- 08:55 UTC: sync-yahoo-players-to-sheet
- 09:00 UTC: update-rolling-player-averages (POST)
- 09:05 UTC: refresh goalie_stats_unified matview
- 09:10 UTC: update-team-ctpi-daily

- 09:12 UTC: update-team-sos (NEW)

- 09:15 UTC: update-team-power-ratings
- 09:20 UTC: update-team-power-ratings-new
- 09:30 UTC: update-goalie-projections-v2
- 09:35 UTC: update-wgo-teams
- 09:40 UTC: update-start-chart-projections

- 09:45 UTC: ingest-projection-inputs (NEW)

- 09:50 UTC: build-forge-derived-v2
- 09:55 UTC: update-nst-team-daily
- 10:00 UTC: refresh yahoo_nhl_player_map_mat
- 10:05 UTC: run-forge-projection-v2
- 10:15 UTC: refresh-team-power-ratings-daily

- 11:30 UTC: run-projection-accuracy (NEW)

- 13:00 UTC: daily-cron-report

Gap notes (where new jobs fit)
- 07:15 UTC: pre-ingestion slot for update-games.
- 09:12 UTC: between CTPI daily and power ratings for SOS update.
- 09:45 UTC: between start-chart projections and forge-derived build for ingest-projection-inputs.
- 11:30 UTC: post-forge projections for run-projection-accuracy.

```sql

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  09:12 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  04:12 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'update-team-sos',
--     '12 9 * * *', -- 09:12 UTC
--     $$
--         SELECT net.http_get(
--             url := 'https://fhfhockey.com/api/v1/db/update-team-sos',
--             headers := '{"Authorization": "Bearer fhfh-cron-mima-233"}'::jsonb,
--             timeout_milliseconds := 240000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  09:45 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  04:45 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'ingest-projection-inputs',
--     '45 9 * * *', -- 09:45 UTC
--     $$
--         SELECT net.http_post(
--             url := 'https://fhfhockey.com/api/v1/db/ingest-projection-inputs',
--             body := '{}'::jsonb,
--             headers := '{"Authorization": "Bearer fhfh-cron-mima-233", "Content-Type": "application/json"}'::jsonb,
--             timeout_milliseconds := 300000
--         );
--     $$
-- );

----------------------------------------------------------------------------------
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  11:30 UTC  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||  06:30 EST  |||||||||||||||||||||||||||||||||
-- |||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

-- SELECT cron.schedule(
--     'run-projection-accuracy',
--     '30 11 * * *', -- 11:30 UTC
--     $$
--         SELECT net.http_post(
--             url := 'https://fhfhockey.com/api/v1/db/run-projection-accuracy?projectionOffsetDays=0',
--             body := '{}'::jsonb,
--             headers := '{"Authorization": "Bearer fhfh-cron-mima-233", "Content-Type": "application/json"}'::jsonb,
--             timeout_milliseconds := 300000
--         );
--     $$
-- );
```
